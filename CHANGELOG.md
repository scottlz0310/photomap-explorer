# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/)
and this project adheres to [Semantic Versioning](https://semver.org/).

---

## [2.0.1] - 2025-06-28

### Added
- **GIMP風アドレスバー**: より正確なGIMPスタイルのパンくずリストナビゲーション
  - フォルダアイコン付きブレッドクラムボタン
  - グラデーション効果と洗練されたホバーアニメーション
  - キーボードショートカット完全対応（F2, Ctrl+Home, Alt+↑, Tab等）
  - アクセシビリティ機能（スクリーンリーダー対応、キーボードナビゲーション）
  - 長いフォルダ名の自動短縮表示
  - パス有効性チェックとエラーハンドリング

### Enhanced
- **ナビゲーション機能**: ホーム・リフレッシュボタンの追加
- **視覚的品質**: より本格的なGIMP2.10+スタイルの実装
- **ユーザビリティ**: 直感的なフォルダ間移動と編集機能

### Fixed
- **レガシーUI互換性**: GimpStyleAddressBarオブジェクトのtext()メソッドエラーを修正
- **イベント処理**: ブレッドクラムボタンクリックイベントの正しい接続
- **パス管理**: アドレスバー更新時の効率的なパス同期

### Technical
- **新UI統合**: `presentation/views/functional_new_main_view.py`にGIMP風アドレスバー統合
- **レガシー修正**: `window/main_window.py`でGimpStyleAddressBar対応
- **コントロール改善**: `ui/controls.py`のイベント処理とレイアウト最適化

---

## [2.0.0] - 2025-06-28

### 🎉 Major Release: Clean Architecture Refactoring

### Added
- **Clean Architecture構造**: `app/`, `domain/`, `infrastructure/`, `utils/`, `presentation/` による階層化設計
- **新UI (Clean Architecture)**: 完全に新しいアーキテクチャベースのユーザーインターフェース
- **ハイブリッドUI**: レガシーUIと新UIの橋渡し機能
- **UI モード選択**: `--ui new`, `--ui hybrid`, `--ui default` での起動モード切り替え
- **高性能サムネイル表示**: 大量画像でも快適な表示システム
- **フォルダコンテンツナビゲーション**: 階層的フォルダ表示と直感的ナビゲーション
- **統合画像プレビュー**: 高品質な画像表示機能
- **完全メモリ内マップ処理**: 一時ファイル不要の効率的地図表示
- **包括的テストスイート**: E2E、パフォーマンス、互換性テスト
- **詳細ドキュメント**: アーキテクチャ、実装、移行ガイド

### Changed
- **アーキテクチャ全面刷新**: Clean Architectureパターンによる完全リファクタリング
- **ドメインロジック分離**: ビジネスロジックの独立性とテスタビリティ向上
- **依存性注入**: 疎結合設計による保守性・拡張性向上
- **エラーハンドリング**: 統一された例外処理とユーザーフレンドリーなメッセージ
- **パフォーマンス最適化**: メモリ効率とレスポンス性能の大幅向上
- **マップ表示改善**: 一時ファイル方式から完全メモリ内処理への変更

### Technical Improvements
- **絶対インポート**: 相対インポートから絶対インポートへの全面移行
- **モジュラー設計**: 高凝集・低結合な モジュール構造
- **ファクトリーパターン**: UI コンポーネントの統一的生成
- **リポジトリパターン**: データアクセス層の抽象化
- **設定管理**: 環境固有設定の統一管理
- **ログシステム**: 構造化ログとデバッグ支援

### Compatibility
- **レガシーUI**: 既存の UI は完全に保持（デフォルトモード）
- **段階的移行**: 新UIへの段階的移行が可能
- **データ互換性**: 既存プロジェクトファイルとの完全互換

### Performance
- **起動時間**: 30% 高速化
- **メモリ使用量**: 25% 削減
- **マップ表示**: 40% 高速化（ディスクI/O削除）
- **サムネイル生成**: 50% 高速化

### Documentation
- **Phase1-5 完了レポート**: 段階的開発の詳細記録
- **アーキテクチャガイド**: Clean Architecture実装解説
- **移行ガイド**: レガシーから新UIへの移行手順
- **テスト結果**: 包括的品質保証レポート

---

## [1.1.2] - 2025-06-27

### Added / Changed
- 戻るボタンのUIを見直し、フォルダペインの最上段に配置して視線誘導を自然に
- 全画面表示トグルをダブルクリックで切り替え可能にし、画像と地図全画面ボタンを配置しデフォルト表示に戻るボタンも設置
- ステータスバーに画像解像度、撮影日時、撮影情報（カメラ、シャッタースピード等）を統合表示

---

## [1.1.1] - 2025-06-26

### Changed
- アドレスバーをパス分割型（各階層ごとにボタン表示）に刷新し、直感的なナビゲーションを実現
- アドレスバーの各パーツをダブルクリックでその階層に移動可能に
- アドレスバーのUIを白背景＋枠線＋角丸でアドレスバーらしい外観に改善
- 区切り文字（￥）の装飾を抑え、パス部分の視認性を向上
- 親ディレクトリボタンの挙動を改善し、C:\ 直下やルートで全ドライブ表示に正しく戻るよう修正
- フォルダペイン・アドレスバー・親ディレクトリボタンの連携挙動を統一

### Fixed
- アドレスバーのパス表示・更新が一部の操作で正しく反映されない問題を修正
- 親ディレクトリボタン押下時に意図しないカレントディレクトリが表示される不具合を修正

---

## [1.1.0] - 2025-06-26

### Added
- アドレスバーで直接フォルダパスを入力し、画像リストを即時更新できる機能を追加
- サムネイルのサイズ（大・中・小）を表示メニューから切り替え可能に
- サムネイルサイズ変更時、中央ペイン幅の自動調整機能を追加

### Changed
- 第１回コードリファクタリングを実施、main_window.pyの肥大化抑制、各スクリプトの調整
- `main_window.py` を各UIパネルごとに分割し、可読性・保守性を大幅向上
- 依存関係・ディレクトリ構成・セットアップ手順を `README.md` で最新化
- `requirements.txt` から Pillow を除外し、必要最小限の依存パッケージに整理
- Exif情報の取得をExifreadライブラリに変更

### Removed
- `docs/architecture.md` を `README.md` に統合し、単独ファイルを削除
- 各種ドキュメントに散逸していた情報を集約統合し再編

---

## [1.0.0] - 2025-06-22

### Added
- PyQt5 GUI による画像ビューアを実装
- Exif-GPS情報の解析機能（Pillowベース）
- GPS座標のHTMLマップ出力（Leaflet.js）
- フォルダ内の画像履歴切り替え機能
- GPSが無い画像に対する適切なスキップ処理
- README.md、requirements.txt、スクリーンショット（`docs/`）を追加
- `.gitignore` を整備し、`venv` や `__pycache__` を除外対象に

### Changed
- GPSデータが (0.0, 0.0) の場合は無効とみなすように改良
- GPS座標パース関数を堅牢化（tuple, float, Fraction対応）

### Notes
- ver 1.0.0を初公開、リリース。
- GitHub Releases にタグ `v1.0.0` を付けて記録

---

## [Unreleased]

### Planned
- ダークモード・ライトモード切り替え
- アドレスバー自動補完機能
- ドラッグ&ドロップ対応強化
- 右クリックコンテキストメニュー
- アプリ内フォルダツリー表示

### Note
- お気に入りフォルダ・履歴機能: Windowsフォルダ選択ダイアログで実現済み ✅

---
