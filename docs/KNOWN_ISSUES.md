# 既知の問題 (Known Issues)

PhotoMap Explorer v2.2.0+ で確認されている既知の問題と制限事項です。

> **最終検証**: 2025年7月13日  
> **検証環境**: Linux環境でのPyQt5アプリケーション  
> **検証状況**: 主要機能の動作確認完了

## 📍 GIMP風アドレスバー

### 幅制約による表示制限

**問題：**
長いフォルダパスが表示される場合、利用可能な幅を超えてパスが展開されるとウィンドウの幅が強制的に表示可能な幅まで広がり、狭められなくなる。

**詳細：**
- カレント側（現在のフォルダ）優先表示を採用
- スクロールバーを廃止したため、幅が足りない場合はルート側から隠す仕様
- 「...」ボタンをクリックすることで、隠された最後のパス部分にジャンプ可能

**影響：**
- 深いフォルダ構造では、完全なパス階層を一度に表示できない
- ナビゲーション時に「...」ボタンの使用が必要になる場合がある

**対処法：**
1. **編集ボタン（📝）を使用** - テキスト入力モードで完全なパスを確認・編集
2. **「...」ボタンをクリック** - 隠されたパス部分にジャンプ
3. **ウィンドウ幅を広げる** - より多くのボタンを同時表示（←現在の状態）

**技術的背景：**
この制限は意図的な設計選択です：
- スクロールバーによるUI混雑を回避
- 現在位置（カレント）の視認性を最優先
- モダンなファイラーのUX設計に準拠

**状態：** `WONTFIX` - 設計思想に基づく意図的な制限

### ~~Windowsパス構築の問題（修正済み）~~

**~~問題：~~** ~~ドライブボタン（例：C:）をクリックした際に無効なパスになる~~

**~~原因：~~** ~~Windows ドライブ文字（C:）に末尾の`\`が不足~~

**修正：** v2.1.0で修正済み - ドライブ部分のパス構築ロジックを改善

### ~~サムネイル表示の問題（修正済み）~~

**~~問題：~~** ~~サムネイル一覧でフルパスが表示され、単一列表示になってしまう~~

**~~原因：~~** ~~`os.path.basename()`を使わずに、不適切なパス分割処理~~

**修正：** v2.1.0で修正済み
- ファイル名のみを表示（`os.path.basename()`使用）
- 複数列表示対応（`QListWidget.Adjust`設定）
- フルパスは`Qt.UserRole`でデータとして保存

---

## � UI・UX関連

### EXIF情報表示の改善

**改善完了：** v2.2.0でスクロールバー実装済み
- `left_panel_manager.py`に`QScrollArea`を追加
- EXIF情報が長い場合の表示問題を解決
- 高さ制約（150-300px）による適切な表示領域確保

**技術詳細：**
- `QScrollArea`でステータス情報をラップ
- `setWidgetResizable(True)`でコンテンツ自動調整
- 垂直・水平スクロールポリシーの最適化

---

## �🔧 その他の制限事項

### フォルダ選択ダイアログ

**制限：**
Windows標準のフォルダ選択ダイアログでは、フォルダのみが表示され、ファイルは表示されません。

**理由：**
`QFileDialog.getExistingDirectory()` の仕様による制限。

**代替案：**
フォルダ選択後、サムネイル一覧でフォルダ内のファイルを確認できます。

---

## 🎨 ダークモード関連

### ~~QGroupBoxタイトルの色変更問題（修正済み）~~

**~~問題：~~** ~~プレビューエリアの"🖼️プレビュー"とマップエリアの"🗺️マップ"のタイトル文字がダーク⇔ライトテーマ切り替え時に色が変わらない~~

**~~原因：~~** ~~QGroupBoxのタイトル要素がテーマ適用処理の対象外だった~~

**修正：** v2.1.1で修正済み
- QGroupBoxタイトルの専用テーマ適用処理を追加
- `_apply_additional_theme_styles()`にQGroupBox専用スタイル設定を実装
- title要素の色、背景色、枠線をテーマに連動するよう改善

### ~~最大化ウィンドウでのテーマ適用問題（修正済み）~~

**~~問題：~~** ~~最大化されたプレビュー・マップウィンドウでテーマが正しく適用されない~~

**~~原因：~~** ~~最大化ハンドラーでのテーマ取得処理が不十分だった~~

**修正：** v2.2.0で修正済み
- `maximize_handler.py`に複数のテーマ取得フォールバック機能を実装
- `theme_manager`、`theme_handler`、`theme_engine`からの段階的テーマ取得
- 最大化ウィンドウ専用のテーマ適用処理を追加

---

## 🧭 ナビゲーション関連

### ~~ホームフォルダボタンの動作問題（修正済み）~~

**~~問題：~~** ~~ツールバーのホームボタンをクリックしても反応しない~~

**~~検証結果（2025年7月13日）：~~** ~~実際には正常に動作していることが確認済み~~

**修正：** v2.2.0で修正済み
- シグナル接続が正しく実装されている（`navigation_controls.py` → `main_window_core.py`）
- `home_folder_requested`シグナルから`go_to_home_folder()`メソッドへの連携が正常動作
- 実行時ログで`/home/hiro`への移動処理が確認済み
- 警告メッセージは表示されるが、機能には影響なし

**技術詳細：**
- ホームボタンクリック → `home_folder_requested.emit()` 
- `main_window_core.py`で受信 → `go_to_home_folder()`実行
- `os.path.expanduser("~")`でホームパス取得
- `folder_event_handler`経由でフォルダ読み込み実行

---
- PNGなどもともとGPS情報を持ってない画像と、位置情報をたまたま取れていないJPG画像で挙動が異なる。
    (前者はGPS情報なしの用意されたHTML表示、後者は Null Island にピンが立つ)

### 診断メッセージ

**現象：**
アプリケーション実行時に以下のような警告メッセージが表示される場合があります：

```
[WARNING] navigation_controlsの参照でエラーが発生しました
```

**影響：**
この警告メッセージは表示されますが、実際の機能には影響しません。ナビゲーション機能（ホームボタン、戻る/進むボタンなど）は正常に動作します。

**原因：**
参照取得時の警告であり、実際のシグナル接続や機能実行には問題ありません。

**対処：**
- 機能的な問題ではないため、特別な対処は不要です
- アプリケーション動作に支障はありません
- 将来のバージョンで警告メッセージの最適化を検討します

---

*最終更新: 2025年7月13日*